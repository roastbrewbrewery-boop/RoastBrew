<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Brewery - Checkout | Secure Payment</title>
    <meta name="description" content="Review your cart, proceed to secure checkout, and complete your order for craft beers.">
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&family=Oswald:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body class="checkout-page">
    <header class="main-header">
        <nav class="navbar">
            <div class="logo">
                <a href="index.html">Roast & Brew Brewery</a>
            </div>
            <ul class="nav-links">
                <li><a href="index.html#about">About</a></li>
                <li><a href="index.html#beers">Our Beers</a></li>
                <li><a href="index.html#contact">Contact</a></li>
                <li><a href="track.html">Track Order</a></li>
                <li><a href="shop.html">Shop</a></li>
                <li class="auth-links">
                    <!-- Updated ID for unified sign-in/out handling -->
                    <a href="#" id="signin-btn-all"><i class="fas fa-user"></i> Sign In/Up</a>
                </li>
                <li class="cart-link">
                    <a href="checkout.html" class="active"><i class="fas fa-shopping-cart"></i> Cart (<span id="cart-count-checkout">0</span>)</a>
                </li>
            </ul>
            <div class="burger">
                <div class="line1"></div>
                <div class="line2"></div>
                <div class="line3"></div>
            </div>
        </nav>
    </header>

    <main class="checkout-page-content">
    <section class="page-hero checkout-hero">
        <div class="container">
            <h1>Your Shopping Cart</h1>
            <p>Review your items and proceed to a secure checkout.</p>
        </div>
    </section>

    <section id="checkout-details" class="section checkout-section">
        <div class="container">
            <h2>Your Items</h2>
            <div class="cart-items" id="cart-items">
                <!-- Cart items will be dynamically added here by JavaScript -->
                <p>Your cart is empty.</p>
            </div>
            <div class="cart-summary">
                <p>Subtotal: <span id="cart-subtotal">₱ 0.00</span></p>
                <p>Shipping: <span id="cart-shipping">₱ 50.00</span></p>
                <h3>Total: <span id="cart-total">₱ 0.00</span></h3>
                <button class="btn" id="proceed-to-payment-btn">Proceed to Payment</button>
                <p class="disclaimer">Payment processing requires a secure backend integration.</p>
            </div>

            <!-- Removed the shipping form from here, it will now be in the payment modal -->
        </div>
    </section>
</main>

<!-- Hidden container for generating the image receipt -->
<div id="receipt-container" style="position: absolute; left: -9999px; width: 400px; padding: 20px; background: white; border: 1px solid #ccc; font-family: 'Courier New', monospace; color: #000;">
    <!-- Receipt content will be dynamically inserted here by JavaScript -->
</div>

<footer class="main-footer">
    <div class="container">
        <p>&copy; 2025 Roast&Brew. All rights reserved.</p>
    <div class="contact-info">
        <p>Email: info@yourbrewery.com</p>
        <p>Phone: (123) 456-7890</p>
        <p>Baguio City, Philippines</p>
    </div>
    </div>
</footer>

<!-- Payment Modal Structure -->
<div id="payment-modal" class="modal">
    <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2>Complete Your Order</h2>
        <form id="payment-form" class="payment-form" autocomplete="off">
            <h3>Shipping Information</h3>
            <div class="form-group">
                <label for="p-full-name">Full Name:</label>
                <input type="text" id="p-full-name" name="full-name" required autocomplete="name">
            </div>
            <div class="form-group">
                <label for="p-address-line1">Address Line 1:</label>
                <input type="text" id="p-address-line1" name="address-line1" required autocomplete="address-line1">
            </div>
            <div class="form-group">
                <label for="p-address-line2">Address Line 2 (Optional):</label>
                <input type="text" id="p-address-line2" name="address-line2" autocomplete="address-line2">
            </div>
            <div class="form-group">
                <label for="p-city">City:</label>
                <input type="text" id="p-city" name="city" required autocomplete="address-level2">
            </div>
            <div class="form-group">
                <label for="p-state">State/Province:</label>
                <input type="text" id="p-state" name="state" required autocomplete="address-level1">
            </div>
            <div class="form-group">
                <label for="p-zip">Zip/Postal Code:</label>
                <input type="text" id="p-zip" name="zip" required autocomplete="postal-code">
            </div>
            <div class="form-group">
                <label for="p-country">Country:</label>
                <input type="text" id="p-country" name="country" value="Philippines" required autocomplete="country-name">
            </div>

            <h3>Payment Method</h3>
            <div class="form-group radio-group">
                <div>
                    <input type="radio" id="ecash" name="payment-method" value="E-Cash" autocomplete="off">
                    <label for="ecash">E-Cash</label>
                </div>
                <div>
                    <input type="radio" id="card" name="payment-method" value="Card" autocomplete="off">
                    <label for="card">Card Payment</label>
                </div>
                <div>
                    <input type="radio" id="cod" name="payment-method" value="Cash on Delivery" checked autocomplete="off">
                    <label for="cod">Cash on Delivery</label>
                </div>
            </div>

            <!-- Payment details input fields, dynamically shown/hidden by JS -->
            <div id="ecash-details" class="form-group payment-details" style="display: none;">
                <label for="ecash-number">E-Cash Number:</label>
                <input type="text" id="ecash-number" name="ecash-number" placeholder="e.g., GCash number" autocomplete="off">
            </div>
            <div id="card-details" class="form-group payment-details" style="display: none;">
                <label for="card-number">Card Number:</label>
                <input type="text" id="card-number" name="card-number" placeholder="XXXX XXXX XXXX XXXX" autocomplete="cc-number">
                <label for="expiry-date">Expiry Date:</label>
                <input type="text" id="expiry-date" name="expiry-date" placeholder="MM/YY" autocomplete="cc-exp">
                <label for="cvv">CVV:</label>
                <input type="text" id="cvv" name="cvv" placeholder="123" autocomplete="cc-csc">
            </div>

            <p class="payment-subtotal">Subtotal: <span id="modal-subtotal">₱ 0.00</span></p>
            <p class="payment-shipping">Shipping: <span id="modal-shipping">₱ 0.00</span></p>
            <p class="payment-total">Order Total: <span id="modal-order-total">₱ 0.00</span></p>
            <p id="payment-message" class="error-message" style="display: none;"></p> <!-- NEW: Payment feedback message -->
            <button type="submit" class="btn">Confirm Order</button>
        </form>
        <div class="order-confirmation-message" style="display: none;">
            <p>Thank you for your order! Your order has been placed successfully.</p>
            <button id="download-receipt-btn" class="btn secondary-btn">Download Receipt</button>
        </div>
        <p class="disclaimer">Secure payment and delivery logistics require robust backend services.</p>
    </div>
</div>

<!-- Sign In/Up Modal Structure (re-used from index.html) -->
<div id="signin-modal" class="modal">
    <div class="modal-content">
        <span class="close-btn">&times;</span>
        <h2>Sign In / Sign Up</h2>
        <form class="signin-form" autocomplete="off">
            <div class="form-group">
                <label for="username">Email or Username:</label>
                <input type="text" id="username" name="username" required autocomplete="off">
            </div>
            <div class="form-group">
                <label for="password">Password:</label>
                <input type="password" id="password" name="password" required autocomplete="new-password">
            </div>
            <button type="submit" class="btn">Sign In</button>
            <p class="form-footer">Don't have an account? <a href="#" id="signup-link">Sign Up</a></p>
        </form>

        <form class="signup-form" style="display: none;" autocomplete="off">
            <div class="form-group">
                <label for="new-full-name">Full Name:</label>
                <input type="text" id="new-full-name" name="new-full-name" required autocomplete="name">
            </div>
            <div class="form-group">
                <label for="new-username">Email:</label>
                <input type="email" id="new-username" name="new-username" required autocomplete="off">
            </div>
            <div class="form-group">
                <label for="new-password">Password:</label>
                <input type="password" id="new-password" name="new-password" required autocomplete="new-password">
            </div>
            <div class="form-group">
                <label for="confirm-password">Confirm Password:</label>
                <input type="password" id="confirm-password" name="confirm-password" required autocomplete="new-password">
            </div>
            <button type="submit" class="btn">Sign Up</button>
            <p class="form-footer">Already have an account? <a href="#" id="signin-link">Sign In</a></p>
        </form>
        <p id="signup-message" style="margin-top: 10px; font-size: 0.9em;"></p>
        <p class="disclaimer">User authentication requires a secure backend.</p>
    </div>
    
</div>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script src="script.js"></script>